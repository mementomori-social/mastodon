// Mastodon 4.6+ semantic token overrides for Bird UI
// Each theme variation has its own token definitions
// - html.mastodon-bird-ui: dev mode (BrowserSync adds this class)
// - html.theme-mastodon-bird-ui: embeds
// - data-user-theme selectors: Mastodon core installation
// stylelint-disable no-duplicate-selectors

// Dark theme tokens (only for dark Bird UI themes)
html.mastodon-bird-ui,
html:has(body:not(.admin)).theme-dark,
html.theme-mastodon-bird-ui,
html:has(body:not(.admin)):where(
    [data-user-theme="default"],
    [data-user-theme="mastodon-bird-ui-dark"],
    [data-user-theme="mastodon-bird-ui-dark-change-to-stars"],
    [data-user-theme="hide-finnish"],
    [data-user-theme="hide-finnish-change-to-stars"],
    [data-user-theme="hide-translate-links"],
    [data-user-theme="mastodon-bird-ui-contrast"],
    [data-user-theme="mastodon-bird-ui-accessible"],
    [data-user-theme="mastodon-bird-ui-accessible-hide-finnish"],
    [data-user-theme="mastodon-bird-ui-accessible-plus"]
  ) {
  // Text tokens
  --color-text-primary: #fff;
  --color-text-secondary: #717c9b;
  --color-text-tertiary: #717c9b;
  --color-text-on-inverted: #1e2028;
  --color-text-brand: #6364ff;
  --color-text-brand-soft: #858afa;
  --color-text-on-brand-base: #fff;
  --color-text-brand-on-inverted: #6364ff;
  --color-text-error: #f91880;
  --color-text-on-error-base: #fff;
  --color-text-warning: #ffac33;
  --color-text-on-warning-base: #fff;
  --color-text-success: #00ba7c;
  --color-text-on-success-base: #fff;
  --color-text-disabled: #717c9b;
  --color-text-on-disabled: #9baec8;
  --color-text-bookmark-highlight: #f91880;
  --color-text-favourite-highlight: #ffac33;
  --color-text-on-media: #fff;
  --color-text-status-links: #858afa;

  // Background tokens
  --color-bg-primary: #1e2028;
  --overlay-strength-secondary: 8%;
  --color-bg-secondary-base: #232543;
  --color-bg-secondary: rgb(255 255 255 / 5%);
  --color-bg-secondary-solid: #232543;
  --color-bg-tertiary: rgb(255 255 255 / 10%);
  --color-bg-ambient: #1e2028;
  --color-bg-elevated: #1e2028;
  --color-bg-inverted: #fff;
  --color-bg-media-base: #000;
  --color-bg-media-strength: 65%;
  --color-bg-media: rgb(0 0 0 / 65%);
  --color-bg-overlay: #2b2b33;
  --color-bg-disabled: #393f4f;
  --overlay-strength-brand: 10%;
  --color-bg-brand-base: #6364ff;
  --color-bg-brand-base-hover: #5253e0;
  --color-bg-brand-soft: rgb(99 100 255 / 15%);
  --color-bg-brand-softer: rgb(99 100 255 / 10%);
  --overlay-strength-error: 12%;
  --color-bg-error-base: #f91880;
  --color-bg-error-base-hover: #d91570;
  --color-bg-error-soft: rgb(249 24 128 / 18%);
  --color-bg-error-softer: rgb(249 24 128 / 12%);
  --overlay-strength-warning: 10%;
  --color-bg-warning-base: #ffac33;
  --color-bg-warning-base-hover: #e69500;
  --color-bg-warning-soft: rgb(255 172 51 / 15%);
  --color-bg-warning-softer: rgb(255 172 51 / 10%);
  --overlay-strength-success: 15%;
  --color-bg-success-base: #00ba7c;
  --color-bg-success-base-hover: #00a066;
  --color-bg-success-soft: rgb(0 186 124 / 22%);
  --color-bg-success-softer: rgb(0 186 124 / 15%);

  // Border tokens
  --border-strength-primary: 18%;
  --color-border-primary: #38384d;
  --color-border-media: rgb(255 255 255 / 15%);
  --color-border-on-bg-secondary: rgb(255 255 255 / 12%);
  --color-border-on-bg-brand-softer: #38384d;
  --color-border-on-bg-error-softer: rgb(249 24 128 / 50%);
  --color-border-on-bg-warning-softer: rgb(255 172 51 / 50%);
  --color-border-on-bg-success-softer: rgb(0 186 124 / 50%);
  --color-border-on-bg-inverted: #38384d;

  // Shadow tokens
  --shadow-strength-primary: 80%;
  --color-shadow-primary: rgb(0 0 0 / 80%);
  --dropdown-shadow:
    0 20px 25px -5px rgb(0 0 0 / 80%), 0 8px 10px -6px rgb(0 0 0 / 80%);
  --overlay-icon-shadow: drop-shadow(0 0 8px rgb(0 0 0 / 80%));

  // Graph tokens
  --color-graph-primary-stroke: #6364ff;
  --color-graph-primary-fill: rgb(99 100 255 / 10%);
  --color-graph-warning-stroke: #ffac33;
  --color-graph-warning-fill: rgb(255 172 51 / 10%);
  --color-graph-disabled-stroke: #717c9b;
  --color-graph-disabled-fill: #393f4f;

  // Legacy tokens
  --rich-text-container-color: rgb(87 24 60 / 100%);
  --rich-text-text-color: rgb(255 175 212 / 100%);
  --rich-text-decorations-color: rgb(128 58 95 / 100%);
}

// System theme dark mode
html:has(body:not(.admin)):where([data-user-theme="system"]) {
  @media (prefers-color-scheme: dark) {
    // Text tokens
    --color-text-primary: #fff;
    --color-text-secondary: #717c9b;
    --color-text-tertiary: #717c9b;
    --color-text-on-inverted: #1e2028;
    --color-text-brand: #6364ff;
    --color-text-brand-soft: #858afa;
    --color-text-on-brand-base: #fff;
    --color-text-brand-on-inverted: #6364ff;
    --color-text-error: #f91880;
    --color-text-on-error-base: #fff;
    --color-text-warning: #ffac33;
    --color-text-on-warning-base: #fff;
    --color-text-success: #00ba7c;
    --color-text-on-success-base: #fff;
    --color-text-disabled: #717c9b;
    --color-text-on-disabled: #9baec8;
    --color-text-bookmark-highlight: #f91880;
    --color-text-favourite-highlight: #ffac33;
    --color-text-on-media: #fff;
    --color-text-status-links: #858afa;

    // Background tokens
    --color-bg-primary: #1e2028;
    --color-bg-secondary: rgb(255 255 255 / 5%);
    --color-bg-secondary-solid: #232543;
    --color-bg-tertiary: rgb(255 255 255 / 10%);
    --color-bg-ambient: #1e2028;
    --color-bg-elevated: #1e2028;
    --color-bg-inverted: #fff;
    --color-bg-overlay: #2b2b33;
    --color-bg-disabled: #393f4f;
    --color-bg-brand-base: #6364ff;
    --color-bg-brand-base-hover: #5253e0;
    --color-bg-brand-soft: rgb(99 100 255 / 15%);
    --color-bg-brand-softer: rgb(99 100 255 / 10%);
    --color-bg-error-base: #f91880;
    --color-bg-error-base-hover: #d91570;
    --color-bg-error-soft: rgb(249 24 128 / 18%);
    --color-bg-error-softer: rgb(249 24 128 / 12%);
    --color-bg-warning-base: #ffac33;
    --color-bg-warning-base-hover: #e69500;
    --color-bg-warning-soft: rgb(255 172 51 / 15%);
    --color-bg-warning-softer: rgb(255 172 51 / 10%);
    --color-bg-success-base: #00ba7c;
    --color-bg-success-base-hover: #00a066;
    --color-bg-success-soft: rgb(0 186 124 / 22%);
    --color-bg-success-softer: rgb(0 186 124 / 15%);

    // Border tokens
    --color-border-primary: #38384d;
    --color-border-media: rgb(255 255 255 / 15%);
    --color-border-on-bg-secondary: rgb(255 255 255 / 12%);

    // Shadow tokens
    --color-shadow-primary: rgb(0 0 0 / 80%);
    --dropdown-shadow:
      0 20px 25px -5px rgb(0 0 0 / 80%), 0 8px 10px -6px rgb(0 0 0 / 80%);
  }
}

// Light theme (only for light Bird UI themes)
html:has(body:not(.admin)).theme-light,
html:has(body:not(.admin)):where(
    [data-user-theme="mastodon-bird-ui-light"],
    [data-user-theme="mastodon-bird-ui-light-hide-finnish"],
    [data-user-theme="mastodon-bird-ui-light-hide-finnish-change-to-stars"],
    [data-user-theme="mastodon-bird-ui-light-hide-translate-links"]
  ) {
  // Text tokens (Bird UI light: --color-fg: #000, --color-dim: #9388a6)
  --color-text-primary: #1f1b23;
  --color-text-secondary: #9388a6;
  --color-text-tertiary: #9388a6;
  --color-text-on-inverted: #fff;
  --color-text-brand: #6364ff;
  --color-text-brand-soft: #858afa;
  --color-text-on-brand-base: #fff;
  --color-text-brand-on-inverted: #6364ff;
  --color-text-error: #e0245e;
  --color-text-on-error-base: #fff;
  --color-text-warning: #ffac33;
  --color-text-on-warning-base: #fff;
  --color-text-success: #17bf63;
  --color-text-on-success-base: #fff;
  --color-text-disabled: #b8b3c0;
  --color-text-on-disabled: #9388a6;
  --color-text-bookmark-highlight: #f91880;
  --color-text-favourite-highlight: #ffac33;
  --color-text-on-media: #fff;
  --color-text-status-links: #6364ff;

  // Background tokens (Bird UI light: --color-bg: #fff)
  --color-bg-primary: #fff;
  --overlay-strength-secondary: 5%;
  --color-bg-secondary-base: #f7f9f9;
  --color-bg-secondary: rgb(147 136 166 / 10%);
  --color-bg-secondary-solid: #f7f9f9;
  --color-bg-tertiary: rgb(147 136 166 / 15%);
  --color-bg-ambient: #fff;
  --color-bg-elevated: #fff;
  --color-bg-inverted: #1f1b23;
  --color-bg-media-base: #000;
  --color-bg-media-strength: 65%;
  --color-bg-media: rgb(0 0 0 / 65%);
  --color-bg-overlay: rgb(106 91 131 / 40%);
  --color-bg-disabled: #e6e1ed;
  --overlay-strength-brand: 10%;
  --color-bg-brand-base: #6364ff;
  --color-bg-brand-base-hover: #5253e0;
  --color-bg-brand-soft: rgb(99 100 255 / 12%);
  --color-bg-brand-softer: rgb(99 100 255 / 8%);
  --overlay-strength-error: 12%;
  --color-bg-error-base: #e0245e;
  --color-bg-error-base-hover: #c91f53;
  --color-bg-error-soft: rgb(224 36 94 / 12%);
  --color-bg-error-softer: rgb(224 36 94 / 8%);
  --overlay-strength-warning: 10%;
  --color-bg-warning-base: #ffac33;
  --color-bg-warning-base-hover: #e69a2e;
  --color-bg-warning-soft: rgb(255 172 51 / 12%);
  --color-bg-warning-softer: rgb(255 172 51 / 8%);
  --overlay-strength-success: 15%;
  --color-bg-success-base: #17bf63;
  --color-bg-success-base-hover: #14a857;
  --color-bg-success-soft: rgb(23 191 99 / 15%);
  --color-bg-success-softer: rgb(23 191 99 / 10%);

  // Border tokens (Bird UI light: --color-border: #e6e1ed)
  --border-strength-primary: 12%;
  --color-border-primary: #e6e1ed;
  --color-border-media: rgb(0 0 0 / 15%);
  --color-border-on-bg-secondary: rgb(0 0 0 / 8%);
  --color-border-on-bg-brand-softer: #e6e1ed;
  --color-border-on-bg-error-softer: rgb(224 36 94 / 40%);
  --color-border-on-bg-warning-softer: rgb(255 172 51 / 40%);
  --color-border-on-bg-success-softer: rgb(23 191 99 / 40%);
  --color-border-on-bg-inverted: #e6e1ed;

  // Shadow tokens
  --shadow-strength-primary: 20%;
  --color-shadow-primary: rgb(0 0 0 / 20%);
  --dropdown-shadow:
    0 20px 25px -5px rgb(0 0 0 / 10%), 0 8px 10px -6px rgb(0 0 0 / 10%);
  --overlay-icon-shadow: drop-shadow(0 0 8px rgb(0 0 0 / 30%));

  // Graph tokens
  --color-graph-primary-stroke: #6364ff;
  --color-graph-primary-fill: rgb(99 100 255 / 10%);
  --color-graph-warning-stroke: #ffac33;
  --color-graph-warning-fill: rgb(255 172 51 / 10%);
  --color-graph-disabled-stroke: #9388a6;
  --color-graph-disabled-fill: #e6e1ed;

  // Legacy tokens
  --rich-text-container-color: rgb(253 242 248 / 100%);
  --rich-text-text-color: rgb(157 23 77 / 100%);
  --rich-text-decorations-color: rgb(244 114 182 / 100%);
}

// System theme light mode (matches Bird UI light theme colors)
html:has(body:not(.admin)):where([data-user-theme="system"]) {
  @media (prefers-color-scheme: light) {
    // Text tokens
    --color-text-primary: #1f1b23;
    --color-text-secondary: #9388a6;
    --color-text-tertiary: #9388a6;
    --color-text-on-inverted: #fff;
    --color-text-brand: #6364ff;
    --color-text-brand-soft: #858afa;
    --color-text-on-brand-base: #fff;
    --color-text-error: #e0245e;
    --color-text-warning: #ffac33;
    --color-text-success: #17bf63;
    --color-text-disabled: #b8b3c0;
    --color-text-bookmark-highlight: #f91880;
    --color-text-favourite-highlight: #ffac33;
    --color-text-status-links: #6364ff;

    // Background tokens
    --color-bg-primary: #fff;
    --color-bg-secondary: rgb(147 136 166 / 10%);
    --color-bg-secondary-solid: #f7f9f9;
    --color-bg-tertiary: rgb(147 136 166 / 15%);
    --color-bg-ambient: #fff;
    --color-bg-elevated: #fff;
    --color-bg-inverted: #1f1b23;
    --color-bg-overlay: rgb(106 91 131 / 40%);
    --color-bg-disabled: #e6e1ed;
    --color-bg-brand-base: #6364ff;
    --color-bg-brand-base-hover: #5253e0;
    --color-bg-brand-soft: rgb(99 100 255 / 12%);
    --color-bg-brand-softer: rgb(99 100 255 / 8%);
    --color-bg-error-base: #e0245e;
    --color-bg-error-soft: rgb(224 36 94 / 12%);
    --color-bg-warning-base: #ffac33;
    --color-bg-warning-soft: rgb(255 172 51 / 12%);
    --color-bg-success-base: #17bf63;
    --color-bg-success-soft: rgb(23 191 99 / 15%);

    // Border tokens
    --color-border-primary: #e6e1ed;
    --color-border-media: rgb(0 0 0 / 15%);

    // Shadow tokens
    --color-shadow-primary: rgb(0 0 0 / 20%);
    --dropdown-shadow:
      0 20px 25px -5px rgb(0 0 0 / 10%), 0 8px 10px -6px rgb(0 0 0 / 10%);
  }
}

// High contrast theme
html:has(body:not(.admin))[data-user-theme="contrast"],
html:has(body:not(.admin))[data-user-theme="contrast"] .theme-dark {
  // Higher contrast text
  --color-text-primary: #fff;
  --color-text-secondary: #a0a8c0;
  --color-text-tertiary: #8890a8;
  --color-text-brand: #8080ff;
  --color-text-brand-soft: #a0a0ff;
  --color-text-status-links: #a0a0ff;

  // Stronger borders
  --color-border-primary: #505070;
  --border-strength-primary: 25%;
}
